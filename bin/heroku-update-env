#!/usr/bin/env bash

while [[ -n "$1" ]]; do
  case "$1" in
    -n | --app-name)
      shift
      APP_NAME="$1"
      ;;
    -f | --file)
      shift
      FILE_NAME="$1"
      ;;
  esac
  shift
done

echo "Updating ENV at '$APP_NAME' with ENV at '$FILE_NAME'"

if [ -z "$FILE_NAME" ]; then
  echo "Missing file name"
  exit 1
fi

if [ -z "$APP_NAME" ]; then
  echo "Missing app name!"
  exit 1
fi

if [[ ! -f "$FILE_NAME" ]]; then
  echo "File '$FILE_NAME' does not exist"
  exit 1
fi


cat $FILE_NAME | xargs -p heroku config:set --app $APP_NAME

